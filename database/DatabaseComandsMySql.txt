
  #####################
  ###### creation #######
  #####################

  # create, alter, delete


create database appdata;

#delete database, table, column...
drop database appdata;
drop table tarefa;

#select database to command
use appdata;

create table tarefa(
	id bigint not null primary key auto_increment,
	titulo varchar(50) not null,
	descricao varchar(150),
	completa bit(1) not null default(b'0'),
	id_lista bigint not null
);
alter table tarefa add constraint FK_LISTA_TAREFA foreign key (id_lista) references lista(id);

create table lista(
	id bigint not null primary key auto_increment,
	nome varchar(50) not null,
	cap_max int
);

create table checklist_item(
	id bigint not null primary key auto_increment,
	titulo varchar(50) not null,
	descricao varchar(150)
);

create table checklist(
	id_tarefa bigint not null,
	id_checklist_item bigint not null,
	completa bit(1) not null default(b'0'),
	foreign key (id_tarefa) references tarefa(id),
	foreign key (id_checklist_item) references checklist_item(id),
	primary key (id_tarefa, id_checklist_item)
);

create table checklist(
	id_tarefa bigint not null,
	id_checklist_item bigint not null,
	completa bit(1) not null default(b'0'),
	foreign key (id_tarefa) references tarefa(id),
	foreign key (id_checklist_item) references checklist_item(id),
	primary key (id_tarefa, id_checklist_item)
);

#add column to table
alter table tarefa add column id_lista bigint not null;


  ####################
  ### manipulation ####
  ####################

  # insert, update, search/select


insert into lista(nome, cap_max)
values ('jogatina', 10);

insert into tarefa(titulo, descricao, id_lista)
values ('cyberpunk 2077', 'all afternoon', 2);

update tarefa set completa = 1 where id = 2;

select * from tarefa t;
select * from tarefa where id_lista = 2;
select * from tarefa where id_lista = 1 and completa = 0;
select * from tarefa where id_lista in (1,2);
